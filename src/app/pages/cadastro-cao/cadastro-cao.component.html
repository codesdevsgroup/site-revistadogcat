<div class="cadastro-container">
  <!-- Progress Steps -->
  <section class="progress-section">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="progress-steps">
            <div class="step" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
              <div class="step-number">1</div>
              <div class="step-label">Dados Pessoais</div>
            </div>
            <div class="step-line" [class.active]="currentStep > 1"></div>
            <div class="step" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
              <div class="step-number">2</div>
              <div class="step-label">Dados do C√£o</div>
            </div>
            <div class="step-line" [class.active]="currentStep > 2"></div>
            <div class="step" [class.active]="currentStep >= 3" [class.completed]="currentStep > 3">
              <div class="step-number">3</div>
              <div class="step-label">V√≠deo de Apresenta√ß√£o</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Content -->
  <section class="form-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="form-card">
            <!-- Step 1: Dados Pessoais -->
            <div class="form-step" [class.active]="currentStep === 1">
              <div class="step-header">
                <h2>üë§ Dados Pessoais</h2>
                <p>Informa√ß√µes do propriet√°rio/criador</p>
              </div>
              
              <form [formGroup]="userForm" class="step-form">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Nome Completo *</label>
                    <input type="text" class="form-control" formControlName="nomeCompleto" placeholder="Seu nome completo">
                    <div class="invalid-feedback" *ngIf="userForm.get('nomeCompleto')?.invalid && userForm.get('nomeCompleto')?.touched">
                      Nome completo √© obrigat√≥rio
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">CPF *</label>
                    <input type="text" class="form-control" formControlName="cpf" placeholder="000.000.000-00" mask="000.000.000-00">
                    <div class="invalid-feedback" *ngIf="userForm.get('cpf')?.invalid && userForm.get('cpf')?.touched">
                      CPF √© obrigat√≥rio
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">E-mail *</label>
                    <input type="email" class="form-control" formControlName="email" placeholder="seu@email.com">
                    <div class="invalid-feedback" *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                      E-mail v√°lido √© obrigat√≥rio
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Telefone/WhatsApp *</label>
                    <input type="text" class="form-control" formControlName="telefone" placeholder="(11) 99999-9999" mask="(00) 00000-0000">
                    <div class="invalid-feedback" *ngIf="userForm.get('telefone')?.invalid && userForm.get('telefone')?.touched">
                      Telefone √© obrigat√≥rio
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-8 mb-3">
                    <label class="form-label">Endere√ßo</label>
                    <input type="text" class="form-control" formControlName="endereco" placeholder="Rua, n√∫mero, bairro">
                    <small class="form-text">O endere√ßo ser√° preenchido automaticamente pelo CEP, mas voc√™ pode edit√°-lo</small>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="form-label">CEP</label>
                    <div class="input-group">
                      <input type="text" class="form-control" 
                             [class.cep-loading]="cepStatus === 'loading'"
                             [class.cep-success]="cepStatus === 'success'"
                             [class.cep-error]="cepStatus === 'error'"
                             formControlName="cep" placeholder="00000-000" 
                             maxlength="9" (input)="formatCep($event)" (blur)="onCepChange($event)">
                      <div class="input-group-append" *ngIf="isCepLoading">
                        <span class="input-group-text">
                          <div class="spinner-border spinner-border-sm" role="status">
                            <span class="sr-only">Buscando...</span>
                          </div>
                        </span>
                      </div>
                      <div class="input-group-append" *ngIf="cepStatus === 'success' && !isCepLoading">
                        <span class="input-group-text text-success">
                          ‚úì
                        </span>
                      </div>
                      <div class="input-group-append" *ngIf="cepStatus === 'error' && !isCepLoading">
                        <span class="input-group-text text-danger">
                          ‚úó
                        </span>
                      </div>
                    </div>
                    <small class="form-text" 
                           [class.text-success]="cepStatus === 'success'"
                           [class.text-danger]="cepStatus === 'error'">
                      <span *ngIf="cepStatus === 'none' || cepStatus === 'loading'">Digite o CEP para preenchimento autom√°tico</span>
                      <span *ngIf="cepStatus === 'success'">‚úì Endere√ßo encontrado e preenchido</span>
                      <span *ngIf="cepStatus === 'error'">‚úó CEP n√£o encontrado</span>
                    </small>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Cidade</label>
                    <input type="text" class="form-control" formControlName="cidade" placeholder="Sua cidade">
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Estado</label>
                    <select class="form-control" formControlName="estado">
                      <option value="">Selecione</option>
                      <option value="AC">Acre</option>
                      <option value="AL">Alagoas</option>
                      <option value="AP">Amap√°</option>
                      <option value="AM">Amazonas</option>
                      <option value="BA">Bahia</option>
                      <option value="CE">Cear√°</option>
                      <option value="DF">Distrito Federal</option>
                      <option value="ES">Esp√≠rito Santo</option>
                      <option value="GO">Goi√°s</option>
                      <option value="MA">Maranh√£o</option>
                      <option value="MT">Mato Grosso</option>
                      <option value="MS">Mato Grosso do Sul</option>
                      <option value="MG">Minas Gerais</option>
                      <option value="PA">Par√°</option>
                      <option value="PB">Para√≠ba</option>
                      <option value="PR">Paran√°</option>
                      <option value="PE">Pernambuco</option>
                      <option value="PI">Piau√≠</option>
                      <option value="RJ">Rio de Janeiro</option>
                      <option value="RN">Rio Grande do Norte</option>
                      <option value="RS">Rio Grande do Sul</option>
                      <option value="RO">Rond√¥nia</option>
                      <option value="RR">Roraima</option>
                      <option value="SC">Santa Catarina</option>
                      <option value="SP">S√£o Paulo</option>
                      <option value="SE">Sergipe</option>
                      <option value="TO">Tocantins</option>
                    </select>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn btn-primary" (click)="nextStep()" [disabled]="!userForm.valid">
                    Pr√≥ximo: Dados do C√£o
                    <i class="icon">‚Üí</i>
                  </button>
                </div>
              </form>
            </div>

            <!-- Step 2: Dados do C√£o -->
            <div class="form-step" [class.active]="currentStep === 2">
              <div class="step-header">
                <h2>üêï Dados do C√£o</h2>
                <p>Informa√ß√µes completas do seu c√£o</p>
              </div>
              
              <form [formGroup]="dogForm" class="step-form">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Nome do C√£o *</label>
                    <input type="text" class="form-control" formControlName="nome" placeholder="Nome do seu c√£o">
                    <div class="invalid-feedback" *ngIf="dogForm.get('nome')?.invalid && dogForm.get('nome')?.touched">
                      Nome do c√£o √© obrigat√≥rio
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Ra√ßa *</label>
                    <select class="form-control" formControlName="raca">
                      <option value="">Selecione a ra√ßa</option>
                      <option value="golden-retriever">Golden Retriever</option>
                      <option value="labrador">Labrador</option>
                      <option value="pastor-alemao">Pastor Alem√£o</option>
                      <option value="border-collie">Border Collie</option>
                      <option value="bulldog-frances">Bulldog Franc√™s</option>
                      <option value="poodle">Poodle</option>
                      <option value="shih-tzu">Shih Tzu</option>
                      <option value="yorkshire">Yorkshire</option>
                      <option value="outro">Outro</option>
                    </select>
                    <div class="invalid-feedback" *ngIf="dogForm.get('raca')?.invalid && dogForm.get('raca')?.touched">
                      Ra√ßa √© obrigat√≥ria
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-3 mb-3">
                    <label class="form-label">Sexo *</label>
                    <select class="form-control" formControlName="sexo">
                      <option value="">Selecione</option>
                      <option value="macho">Macho</option>
                      <option value="femea">F√™mea</option>
                    </select>
                  </div>
                  <div class="col-md-3 mb-3">
                    <label class="form-label">Data de Nascimento *</label>
                    <input type="date" class="form-control" formControlName="dataNascimento">
                  </div>
                  <div class="col-md-3 mb-3">
                    <label class="form-label">Peso (kg)</label>
                    <input type="number" class="form-control" formControlName="peso" placeholder="0.0" step="0.1">
                  </div>
                  <div class="col-md-3 mb-3">
                    <label class="form-label">Altura (cm)</label>
                    <input type="number" class="form-control" formControlName="altura" placeholder="0">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Registro de Pedigree *</label>
                    <input type="text" class="form-control" formControlName="registroPedigree" placeholder="N√∫mero do registro">
                    <small class="form-text">Registro CBKC, FCI ou outro √≥rg√£o oficial</small>
                    <div class="invalid-feedback" *ngIf="dogForm.get('registroPedigree')?.invalid && dogForm.get('registroPedigree')?.touched">
                      Registro de pedigree √© obrigat√≥rio
                    </div>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Microchip</label>
                    <input type="text" class="form-control" formControlName="microchip" placeholder="N√∫mero do microchip">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Nome do Pai</label>
                    <input type="text" class="form-control" formControlName="nomePai" placeholder="Nome do pai">
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Nome da M√£e</label>
                    <input type="text" class="form-control" formControlName="nomeMae" placeholder="Nome da m√£e">
                  </div>
                </div>

                <div class="row">
                  <div class="col-12 mb-3">
                    <label class="form-label">T√≠tulos e Conquistas</label>
                    <textarea class="form-control" formControlName="titulos" rows="3" placeholder="Descreva t√≠tulos, exposi√ß√µes anteriores, pr√™mios..."></textarea>
                  </div>
                </div>

                <div class="row">
                  <div class="col-12 mb-3">
                    <label class="form-label">Caracter√≠sticas Especiais</label>
                    <textarea class="form-control" formControlName="caracteristicas" rows="3" placeholder="Temperamento, particularidades, qualidades de destaque..."></textarea>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn btn-secondary" (click)="prevStep()">
                    <i class="icon">‚Üê</i>
                    Voltar
                  </button>
                  <button type="button" class="btn btn-primary" (click)="nextStep()" [disabled]="!dogForm.valid">
                    Pr√≥ximo: V√≠deo
                    <i class="icon">‚Üí</i>
                  </button>
                </div>
              </form>
            </div>

            <!-- Step 3: V√≠deo -->
            <div class="form-step" [class.active]="currentStep === 3">
              <div class="step-header">
                <h2>üé• V√≠deo de Apresenta√ß√£o</h2>
                <p>Grave um v√≠deo mostrando seu c√£o para avalia√ß√£o</p>
              </div>
              
              <form [formGroup]="videoForm" class="step-form">
                <div class="video-guidelines">
                  <h4>üìã Diretrizes para o V√≠deo</h4>
                  <ul>
                    <li>‚úÖ Dura√ß√£o: m√°ximo 20 segundos</li>
                    <li>‚úÖ Mostrar o c√£o em pose (stack)</li>
                    <li>‚úÖ Caminhar em linha reta (ida e volta)</li>
                    <li>‚úÖ Mostrar perfil lateral completo</li>
                    <li>‚úÖ Boa ilumina√ß√£o e qualidade de imagem</li>
                    <li>‚úÖ Som ambiente (sem m√∫sica)</li>
                  </ul>
                </div>

                <!-- Op√ß√£o de envio -->
                <div class="video-options">
                  <h4>üì§ Como voc√™ enviar√° o v√≠deo?</h4>
                  <div class="option-cards">
                    <div class="option-card" [class.selected]="videoOption === 'upload'" (click)="selectVideoOption('upload')">
                      <div class="option-icon">üì±</div>
                      <h5>Upload Direto</h5>
                      <p>Enviar arquivo do dispositivo</p>
                      <small>M√°x. 50MB, 20 segundos</small>
                    </div>
                    <div class="option-card" [class.selected]="videoOption === 'youtube'" (click)="selectVideoOption('youtube')">
                      <div class="option-icon">üé¨</div>
                      <h5>Link do YouTube</h5>
                      <p>V√≠deo j√° hospedado online</p>
                      <small>YouTube, Vimeo, etc.</small>
                    </div>
                    <div class="option-card" [class.selected]="videoOption === 'whatsapp'" (click)="selectVideoOption('whatsapp')">
                      <div class="option-icon">üí¨</div>
                      <h5>Envio por WhatsApp</h5>
                      <p>Enviarei depois pelo WhatsApp</p>
                      <small>Mais pr√°tico para v√≠deos maiores</small>
                    </div>
                  </div>
                </div>

                <!-- Upload Section -->
                <div class="upload-section" *ngIf="videoOption === 'upload'">
                  <div class="upload-area" (click)="triggerFileInput()">
                    <div class="upload-icon">üé¨</div>
                    <h4>Carregar V√≠deo</h4>
                    <p>Clique aqui ou arraste seu v√≠deo</p>
                    <small>Formatos aceitos: MP4, MOV, AVI (m√°x. 50MB, 20 segundos)</small>
                  </div>
                  <input type="file" #fileInput (change)="onFileSelected($event)" accept="video/*" style="display: none;">
                  
                  <div class="uploaded-file" *ngIf="selectedFile">
                    <div class="file-info">
                      <div class="file-icon">üé•</div>
                      <div class="file-details">
                        <span class="file-name">{{ selectedFile.name }}</span>
                        <span class="file-size">{{ formatFileSize(selectedFile.size) }}</span>
                      </div>
                      <button type="button" class="btn-remove" (click)="removeFile()">‚úï</button>
                    </div>
                    <div class="upload-progress" *ngIf="uploadProgress > 0">
                      <div class="progress-bar" [style.width.%]="uploadProgress"></div>
                    </div>
                  </div>
                </div>

                <!-- YouTube Link Section -->
                <div class="youtube-section" *ngIf="videoOption === 'youtube'">
                  <div class="youtube-option">
                    <label class="form-label">Link do YouTube/Vimeo *</label>
                    <input type="url" class="form-control" formControlName="videoUrl" placeholder="https://youtube.com/watch?v=..." required>
                    <small class="form-text">Cole aqui o link do seu v√≠deo j√° hospedado</small>
                    <div class="invalid-feedback" *ngIf="videoForm.get('videoUrl')?.invalid && videoForm.get('videoUrl')?.touched">
                      Link do v√≠deo √© obrigat√≥rio para esta op√ß√£o
                    </div>
                  </div>
                </div>

                <!-- WhatsApp Section -->
                <div class="whatsapp-section" *ngIf="videoOption === 'whatsapp'">
                  <div class="whatsapp-info">
                    <div class="info-card">
                      <div class="info-icon">üì±</div>
                      <div class="info-content">
                        <h5>Envio por WhatsApp</h5>
                        <p>Ap√≥s finalizar o cadastro, voc√™ receber√° instru√ß√µes para enviar o v√≠deo diretamente pelo WhatsApp.</p>
                        <p><strong>WhatsApp:</strong> {{ socialMedia.whatsapp.formattedNumber }}</p>
                        <p><strong>Prazo:</strong> Envie o v√≠deo em at√© 24 horas ap√≥s o cadastro</p>
                      </div>
                    </div>
                    
                    <div class="confirmation-check">
                      <label class="checkbox-label">
                        <input type="checkbox" formControlName="confirmaWhatsapp">
                        <span class="checkmark"></span>
                        Confirmo que enviarei o v√≠deo pelo WhatsApp em at√© 24 horas
                      </label>
                    </div>
                  </div>
                </div>

                <div class="video-notes">
                  <label class="form-label">Observa√ß√µes sobre o V√≠deo</label>
                  <textarea class="form-control" formControlName="observacoes" rows="3" placeholder="Informa√ß√µes adicionais sobre as condi√ß√µes do v√≠deo, ambiente, etc..."></textarea>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn btn-secondary" (click)="prevStep()">
                    <i class="icon">‚Üê</i>
                    Voltar
                  </button>
                  <button type="button" class="btn btn-success" (click)="submitForm()" [disabled]="!isFormValid()">
                    <i class="icon">‚úì</i>
                    Finalizar Cadastro
                  </button>
                </div>
              </form>
            </div>

            <!-- Success Message -->
            <div class="form-step" [class.active]="currentStep === 4">
              <div class="success-message">
                <div class="success-icon">üéâ</div>
                <h2>Cadastro Realizado com Sucesso!</h2>
                <p>Seu c√£o foi cadastrado na Expo Dog BR. Nossa equipe entrar√° em contato em at√© 48 horas para confirmar a participa√ß√£o.</p>
                
                <div class="next-steps">
                  <h4>üìã Pr√≥ximos Passos:</h4>
                  <ol>
                    <li>Verifica√ß√£o dos dados enviados</li>
                    <li>An√°lise do v√≠deo de apresenta√ß√£o</li>
                    <li>Confirma√ß√£o da categoria de participa√ß√£o</li>
                    <li>Envio das instru√ß√µes finais</li>
                  </ol>
                </div>

                <div class="contact-info">
                  <p><strong>D√∫vidas?</strong> Entre em contato:</p>
                  <a [href]="socialMedia.whatsapp.url" class="btn btn-whatsapp" target="_blank">
          üì± WhatsApp: {{ socialMedia.whatsapp.formattedNumber }}
        </a>
                </div>

                <div class="action-buttons">
                  <a routerLink="/expo-dog" class="btn btn-primary">Voltar para Expo Dog</a>
                  <a routerLink="/" class="btn btn-secondary">Ir para Home</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<app-footer />
