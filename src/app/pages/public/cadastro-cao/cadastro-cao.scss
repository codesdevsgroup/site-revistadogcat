@use '../../../../styles/variables';
@use '../../../../styles/mixins' as *;

@mixin card-base {
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg);
}

.cadastro-container {
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--tertiaryColor) 100%);
  min-height: 100vh;

  .hero-header {
    background: linear-gradient(135deg, var(--primaryColor) 0%, var(--primaryColorDark) 100%);
    color: var(--white);
    padding: var(--space-3) 0;
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="%23ffffff" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat;
      opacity: 0.3;
    }

    .hero-content {
      position: relative;
      z-index: 2;
    }

    .hero-icon {
      font-size: 1.5rem;
      margin-bottom: var(--space-2);
      animation: bounce 2s infinite;
    }

    h1 {
      font-size: 1.875rem;
      font-weight: var(--fontWeight-extrabold);
      margin-bottom: var(--space-2);
      background: linear-gradient(45deg, var(--white), var(--goldenColor));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      font-size: var(--space-4);
      font-weight: var(--fontWeight-semibold);
      margin-bottom: var(--space-3);
      color: var(--secondaryColor);
    }

    .hero-description {
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: var(--space-5);
      opacity: 0.9;
    }

    .registration-options {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-8);
      flex-wrap: wrap;
      margin-top: var(--space-4);

      .option-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-radius: var(--radius-2xl);
        padding: var(--space-6) var(--space-5);
        text-align: center;
        min-width: 180px;
        transition: var(--transition-normal);
        cursor: pointer;

        &:hover {
          transform: translateY(-5px);
          box-shadow: var(--shadow-2xl);
          border-color: rgba(255, 255, 255, 0.4);
        }

        &.active {
          background: rgba(255, 255, 255, 0.2);
          border-color: var(--goldenColor);
          box-shadow: var(--shadow-xl);
        }

        .option-icon {
          font-size: 2.5rem;
          margin-bottom: var(--space-4);
        }

        h3 {
          font-size: 1.2rem;
          font-weight: var(--fontWeight-bold);
          margin-bottom: var(--space-2);
          color: var(--white);
        }

        p {
          font-size: 0.9rem;
          opacity: 0.8;
          margin-bottom: var(--space-4);
        }

        .option-badge {
          background: var(--goldenColor);
          color: var(--primaryColorDark);
          padding: var(--space-1) var(--space-3);
          border-radius: var(--radius-lg);
          font-size: 0.75rem;
          font-weight: var(--fontWeight-bold);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .option-note {
          background: rgba(255, 193, 7, 0.2);
          color: var(--warning);
          padding: var(--space-1) var(--space-3);
          border-radius: var(--radius-lg);
          font-size: 0.75rem;
          font-weight: var(--fontWeight-semibold);
        }

        &.whatsapp-option:hover {
          border-color: var(--whatsapp);
          .option-icon {
            animation: shake 0.5s ease-in-out;
          }
        }
      }

      .option-divider {
        font-size: 1.1rem;
        font-weight: 600;
        opacity: 0.7;
        padding: 0 1rem;
      }
    }
  }

  .progress-section {
    scroll-margin-top: 100px;
    background: var(--white);
    padding: var(--space-4) 0;
    box-shadow: var(--shadow-md);
    margin-bottom: var(--space-4);

    .progress-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 600px;
      margin: 0 auto;

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: all 0.3s ease;

        .step-number {
          width: 30px;
          height: 30px;
          border-radius: 50%;
          background: var(--gray-200);
          color: var(--gray-500);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 700;
          font-size: 1.08rem;
          margin-bottom: 0.5rem;
          transition: all 0.3s ease;
        }

        .step-label {
          font-size: 0.8rem;
          color: var(--gray-500);
          font-weight: 600;
          transition: all 0.3s ease;
        }

        &.active {
          .step-number {
            background: var(--primaryColor);
            color: white;
            transform: scale(1.1);
          }
          .step-label {
            color: var(--primaryColor);
            font-weight: 700;
          }
        }

        &.completed {
          .step-number {
            background: var(--success);
            color: white;
          }
          .step-label {
            color: var(--success);
          }
        }
      }

      .step-line {
        height: 2px;
        width: 50px;
        background: var(--gray-200);
        margin: 0 1rem;
        transition: all 0.3s ease;
        &.active {
          background: var(--primaryColor);
        }
      }
    }
  }

  .form-section {
    padding: var(--space-4) 0 var(--space-8);

    .form-card {
      @include card-base;
      overflow: hidden;

      .form-step {
        display: none;
        padding: var(--space-8) var(--space-4);
        animation: fadeInUp 0.5s ease-out;

        &.active {
          display: block;
        }

        .step-header {
          text-align: center;
          margin-bottom: 1rem;

          h2 {
            color: var(--primaryColor);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
          }

          p {
            color: var(--gray-600);
            margin: 0;
          }
        }

        .form-section-title {
          margin-bottom: var(--space-6);

          h4 {
            color: var(--primaryColor);
            font-size: 1.2rem;
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
          }

          p {
            color: var(--gray-600);
            margin: 0;
            font-size: 0.9rem;
          }
        }

        .form-label {
          font-weight: var(--fontWeight-semibold);
          color: var(--gray-700);
          margin-bottom: var(--space-2);
          display: block;
        }

        .form-control {
          border: 2px solid var(--gray-200);
          border-radius: var(--radius-lg);
          padding: var(--space-3) var(--space-4);
          font-size: 0.9rem;
          transition: var(--transition-normal);

          &:focus {
            border-color: var(--primaryColor);
            box-shadow: 0 0 0 0.2rem rgba(26, 61, 30, 0.25);
          }

          &.is-invalid {
            border-color: var(--error);
          }
        }

        .invalid-feedback {
          color: var(--error);
          font-size: 0.8rem;
          margin-top: var(--space-1);
        }

        .form-text {
          font-size: 0.8rem;
          color: var(--gray-500);
          margin-top: var(--space-1);
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-top: var(--space-6);
          gap: var(--space-4);
        }

        .btn {
          padding: var(--space-3) var(--space-8);
          border-radius: var(--radius-full);
          font-weight: var(--fontWeight-semibold);
          display: flex;
          align-items: center;
          gap: var(--space-2);
          transition: var(--transition-normal);
          border: none;
          cursor: pointer;

          &:hover {
            transform: translateY(-2px);
          }

          &:disabled {
            transform: none;
            opacity: 0.6;
          }
        }

        .btn-primary {
          background: var(--primaryColor);
          color: var(--white);

          &:hover {
            background: var(--primaryColorDark);
          }
        }

        .btn-secondary {
          background: var(--gray-500);
          color: var(--white);

          &:hover {
            background: var(--gray-600);
          }
        }

        .user-info-display {
          margin-top: var(--space-4);

          .user-data-card {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-6);

            .data-item {
              margin-bottom: var(--space-3);

              label {
                font-size: 0.8rem;
                color: var(--gray-500);
                font-weight: 600;
                display: block;
                margin-bottom: var(--space-1);
              }

              .data-value {
                color: var(--gray-700);
                font-weight: 500;
              }
            }
          }
        }

        .photos-section {
          margin-bottom: var(--space-4);

          .section-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);

            h4 {
              color: var(--primaryColor);
              margin-bottom: var(--space-2);
              display: flex;
              align-items: center;
              gap: var(--space-2);
            }

            .section-description {
              color: var(--gray-600);
              margin-bottom: var(--space-4);
            }
          }

          .photo-upload-container {
            position: relative;

            .reference-image {
              position: relative;
              display: inline-block;
              margin-bottom: var(--space-3);

              img.reference-img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: var(--radius-lg);
                border: 2px solid var(--gray-200);
              }

              .reference-label {
                position: absolute;
                bottom: -8px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--primaryColor);
                color: var(--white);
                padding: var(--space-1) var(--space-2);
                border-radius: var(--radius-md);
                font-size: 0.7rem;
                font-weight: 600;
              }
            }

            .upload-area {
              border: 2px dashed var(--gray-200);
              border-radius: var(--radius-xl);
              padding: var(--space-6);
              text-align: center;
              background: var(--white);
              transition: all 0.3s ease;
              cursor: pointer;

              &:hover {
                border-color: var(--primaryColor);
                background: var(--gray-50);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
              }

              &.has-file {
                border-color: var(--success);
                background: var(--success-light);
              }

              .upload-icon {
                font-size: 2rem;
                color: var(--gray-400);
                margin-bottom: var(--space-2);
              }

              .upload-text {
                color: var(--gray-600);
                font-size: 0.9rem;
                margin-bottom: var(--space-1);
              }

              .upload-hint {
                color: var(--gray-500);
                font-size: 0.8rem;
              }
            }
          }

          .file-info {
            background: var(--gray-50);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            margin-top: var(--space-2);

            .file-name {
              font-weight: var(--fontWeight-semibold);
              color: var(--gray-700);
              margin-bottom: var(--space-1);
              word-break: break-all;
            }

            .file-size {
              font-size: 0.8rem;
              color: var(--gray-500);
            }
          }
        }

        .video-section {
          margin-bottom: var(--space-4);

          .video-options {
            display: flex;
            gap: var(--space-4);
            margin-bottom: var(--space-4);

            .video-option {
              flex: 1;
              padding: var(--space-4);
              border: 2px solid var(--gray-200);
              border-radius: var(--radius-lg);
              text-align: center;
              cursor: pointer;
              transition: all 0.3s ease;

              &:hover {
                border-color: var(--primaryColor);
                transform: translateY(-2px);
              }

              &.active {
                border-color: var(--primaryColor);
                background: var(--primaryColor-light);
              }

              .option-icon {
                font-size: 1.5rem;
                margin-bottom: var(--space-2);
              }

              .option-title {
                font-weight: var(--fontWeight-semibold);
                color: var(--gray-700);
                margin-bottom: var(--space-1);
              }

              .option-description {
                font-size: 0.8rem;
                color: var(--gray-500);
              }
            }
          }

          .youtube-section,
          .whatsapp-section {
            @include card-base;
            padding: var(--space-6);
            margin-bottom: var(--space-4);
          }

          .input-group {
            position: relative;
            display: flex;

            .input-group-append {
              margin-left: -1px;

              .input-group-text {
                border: 1px solid var(--gray-200);
                background: var(--gray-50);
                color: var(--primaryColor);
                padding: var(--space-3);
                border-radius: 0 var(--radius-lg) var(--radius-lg) 0;

                .spinner-border {
                  width: 1rem;
                  height: 1rem;
                  border-width: 0.15em;
                }
              }
            }
          }
        }
      }
    }
  }

  .cep-loading {
    border-color: var(--warning);
    box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25);
  }

  .cep-success {
    border-color: var(--success);
    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
  }

  .cep-error {
    border-color: var(--error);
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
  }

  .text-success {
    color: var(--success) !important;
  }

  .text-danger {
    color: var(--error) !important;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  25%, 75% {
    transform: translateX(-5px);
  }
  50% {
    transform: translateX(5px);
  }
}
