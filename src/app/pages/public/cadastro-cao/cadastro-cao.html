<div class="cadastro-container">
  <!-- Hero Header -->
  <section class="hero-header">
    <div class="container">
      <div class="row justify-content-center text-center">
        <div class="col-lg-8">
          <div class="hero-content">
            <div class="hero-icon">üèÜ</div>
            <h1>Expo Dog BR</h1>
            <p class="hero-subtitle">A primeira mostra 100% online do Brasil</p>
            <p class="hero-description">
              Com tradi√ß√£o de mais de 150 anos, as exposi√ß√µes de c√£es ganham um novo formato que democratiza o acesso e valoriza criadores e suas ra√ßas em todo o pa√≠s.
            </p>
            <div class="registration-options">
              <div class="option-card active" (click)="scrollToForm()">
                <div class="option-icon">üíª</div>
                <h3>Cadastro Online</h3>
                <p>Preencha o formul√°rio abaixo</p>
                <div class="option-badge">Recomendado</div>
              </div>
              <div class="option-divider">ou</div>
              <div class="option-card whatsapp-option" (click)="openWhatsAppRegistration()">
                <div class="option-icon">üì±</div>
                <h3>Cadastro via WhatsApp</h3>
                <p>Atendimento personalizado</p>
                <div class="option-note">Alternativa ao formul√°rio</div>
              </div>
            </div>
            <div class="form-instruction" (click)="scrollToForm()">
              <p>üëá Complete o formul√°rio abaixo para se cadastrar na Expo Dog BR</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Progress Steps -->
  <section class="progress-section">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="progress-steps">
            <div class="step" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
              <div class="step-number">1</div>
              <div class="step-label">Dados Pessoais</div>
            </div>
            <div class="step-line" [class.active]="currentStep > 1"></div>
            <div class="step" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
              <div class="step-number">2</div>
              <div class="step-label">Dados do C√£o</div>
            </div>
            <div class="step-line" [class.active]="currentStep > 2"></div>
            <div class="step" [class.active]="currentStep >= 3" [class.completed]="currentStep > 3">
              <div class="step-number">3</div>
              <div class="step-label">V√≠deo de Apresenta√ß√£o</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Content -->
  <section class="form-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="form-card">
            <!-- Step 1: Dados Pessoais -->
            <div class="form-step" [class.active]="currentStep === 1">
              <div class="step-header">
                <h2>üë§ Dados Pessoais</h2>
                <p>Informa√ß√µes do propriet√°rio do c√£o</p>
              </div>

              <form [formGroup]="userForm" class="step-form">
                <!-- Op√ß√£o de Propriet√°rio -->
                <div class="form-check mb-4">
                  <input class="form-check-input" type="checkbox" id="proprietarioDiferente" (change)="toggleProprietarioDiferente()">
                  <label class="form-check-label" for="proprietarioDiferente">
                    O propriet√°rio do c√£o √© outra pessoa?
                  </label>
                </div>

                <!-- Campos do Formul√°rio (condicionais) -->
                <div *ngIf="proprietarioDiferente || !usuarioLogado">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="nomeCompleto" class="form-label">Nome Completo *</label>
                      <input type="text" id="nomeCompleto" class="form-control" formControlName="nomeCompleto" placeholder="Nome completo do propriet√°rio">
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="cpf" class="form-label">CPF *</label>
                      <input type="text" id="cpf" class="form-control" 
                             [class.is-invalid]="userForm.get('cpf')?.invalid && userForm.get('cpf')?.touched"
                             formControlName="cpf" placeholder="000.000.000-00">
                      <div class="invalid-feedback" *ngIf="userForm.get('cpf')?.invalid && userForm.get('cpf')?.touched">
                        <span *ngIf="userForm.get('cpf')?.errors?.['required']">CPF √© obrigat√≥rio</span>
                        <span *ngIf="userForm.get('cpf')?.errors?.['cpfInvalido']">CPF inv√°lido</span>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="email" class="form-label">Email *</label>
                      <input type="email" id="email" class="form-control" formControlName="email" placeholder="seuemail@dominio.com">
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="telefone" class="form-label">Telefone / WhatsApp *</label>
                      <input type="tel" id="telefone" class="form-control" formControlName="telefone" placeholder="(00) 90000-0000">
                    </div>
                  </div>
                   <div class="row">
                    <div class="col-md-4 mb-3">
                      <label for="cep" class="form-label">CEP</label>
                      <input type="text" id="cep" class="form-control" formControlName="cep" placeholder="00000-000" (input)="formatCep($event)" (change)="onCepChange($event)">
                       <div *ngIf="isCepLoading" class="spinner-border spinner-border-sm ms-2" role="status">
                          <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    <div class="col-md-8 mb-3">
                      <label for="endereco" class="form-label">Endere√ßo</label>
                      <input type="text" id="endereco" class="form-control" formControlName="endereco" placeholder="Rua, n√∫mero, bairro">
                    </div>
                  </div>
                   <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="cidade" class="form-label">Cidade</label>
                      <input type="text" id="cidade" class="form-control" formControlName="cidade" placeholder="Sua cidade">
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="estado" class="form-label">Estado</label>
                      <input type="text" id="estado" class="form-control" formControlName="estado" placeholder="Seu estado">
                    </div>
                  </div>
                </div>

                 <!-- Mensagem para usu√°rio logado -->
                <div *ngIf="!proprietarioDiferente && usuarioLogado" class="logged-in-user-info">
                  <p>Os dados do propriet√°rio ser√£o os mesmos do seu cadastro:</p>
                  <ul>
                    <li><strong>Nome:</strong> {{ usuarioLogado.name }}</li>
                    <li><strong>Email:</strong> {{ usuarioLogado.email }}</li>
                  </ul>
                  <p>Se precisar alterar, marque a op√ß√£o acima.</p>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn btn-primary" (click)="nextStep()" [disabled]="!userForm.valid && proprietarioDiferente">Pr√≥ximo: Dados do C√£o</button>
                </div>
              </form>
            </div>

            <!-- Step 2: Dados do C√£o -->
            <div class="form-step" [class.active]="currentStep === 2">
              <div class="step-header">
                <h2>üêï Dados do C√£o</h2>
                <p>Informa√ß√µes completas do seu c√£o</p>
              </div>

              <form [formGroup]="dogForm" class="step-form">

                <div class="row">
                  <div class="col-md-6 mb-3">
                      <label for="nomeCao" class="form-label">Nome do C√£o *</label>
                      <input type="text" id="nomeCao" class="form-control" formControlName="nome" placeholder="Nome do seu c√£o">
                  </div>
                  <div class="col-md-6 mb-3">
                      <label for="raca" class="form-label">Ra√ßa *</label>
                      <select id="raca" class="form-select" formControlName="raca">
                          <option value="" disabled>Selecione a ra√ßa</option>
                          <option *ngFor="let raca of racas" [value]="raca">{{ raca }}</option>
                      </select>
                  </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="sexo" class="form-label">Sexo *</label>
                        <select id="sexo" class="form-select" formControlName="sexo">
                            <option value="" disabled>Selecione o sexo</option>
                            <option value="MACHO">Macho</option>
                            <option value="FEMEA">F√™mea</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="dataNascimento" class="form-label">Data de Nascimento *</label>
                        <input type="date" id="dataNascimento" class="form-control" formControlName="dataNascimento">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="peso" class="form-label">Peso (kg)</label>
                        <input type="number" id="peso" class="form-control" formControlName="peso" placeholder="Ex: 25.5">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="altura" class="form-label">Altura (cm)</label>
                        <input type="number" id="altura" class="form-control" formControlName="altura" placeholder="Ex: 60">
                    </div>
                </div>
                <div class="mb-3">
                    <label for="caracteristicas" class="form-label">Caracter√≠sticas e Temperamento</label>
                    <textarea id="caracteristicas" class="form-control" formControlName="caracteristicas" rows="3" placeholder="Descreva brevemente o temperamento, caracter√≠sticas f√≠sicas not√°veis, etc."></textarea>
                </div>

                <!-- Se√ß√£o Pedigree (Refatorada com Toggle Switch) -->
                <div class="pedigree-section mb-4">
                  <div class="section-card">
                    <div class="d-flex justify-content-between align-items-center">
                      <h4><i class="fas fa-certificate"></i> O c√£o possui pedigree?</h4>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="temPedigree" formControlName="temPedigree">
                        <label class="form-check-label" for="temPedigree">{{ dogForm.get('temPedigree')?.value ? 'SIM' : 'N√ÉO' }}</label>
                      </div>
                    </div>
                    <div class="pedigree-details mt-3" *ngIf="dogForm.get('temPedigree')?.value">
                      <div class="row">
                          <div class="col-md-6 mb-3">
                              <label for="registroPedigree" class="form-label">N¬∫ de Registro do Pedigree *</label>
                              <input type="text" id="registroPedigree" class="form-control" formControlName="registroPedigree" placeholder="N√∫mero de registro">
                          </div>
                      </div>
                      <div class="mb-3">
                          <label for="nomePai" class="form-label">Nome do Pai (no pedigree)</label>
                          <input type="text" id="nomePai" class="form-control" formControlName="nomePai" placeholder="Nome do pai conforme pedigree">
                      </div>
                      <div class="mb-3">
                          <label for="nomeMae" class="form-label">Nome da M√£e (no pedigree)</label>
                          <input type="text" id="nomeMae" class="form-control" formControlName="nomeMae" placeholder="Nome da m√£e conforme pedigree">
                      </div>
                      <div class="mb-3">
                          <label for="titulos" class="form-label">T√≠tulos e Pr√™mios</label>
                          <textarea id="titulos" class="form-control" formControlName="titulos" rows="2" placeholder="Campe√£o Brasileiro, Grande Campe√£o, etc."></textarea>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Se√ß√£o Microchip (Refatorada com Toggle Switch) -->
                <div class="microchip-section mb-4">
                  <div class="section-card">
                    <div class="d-flex justify-content-between align-items-center">
                      <h4><i class="fas fa-microchip"></i> O c√£o possui microchip?</h4>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="temMicrochip" formControlName="temMicrochip">
                        <label class="form-check-label" for="temMicrochip">{{ dogForm.get('temMicrochip')?.value ? 'SIM' : 'N√ÉO' }}</label>
                      </div>
                    </div>
                    <div class="microchip-details mt-3" *ngIf="dogForm.get('temMicrochip')?.value">
                      <div class="row">
                          <div class="col-md-6 mb-3">
                              <label for="numeroMicrochip" class="form-label">N¬∫ do Microchip *</label>
                              <input type="text" id="numeroMicrochip" class="form-control" formControlName="numeroMicrochip" placeholder="N√∫mero de 15 d√≠gitos">
                          </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn btn-secondary" (click)="prevStep()">Voltar</button>
                  <button type="button" class="btn btn-primary" (click)="nextStep()" [disabled]="!dogForm.valid">Pr√≥ximo: V√≠deo</button>
                </div>
              </form>
            </div>

            <!-- Step 3: V√≠deo -->
            <div class="form-step" [class.active]="currentStep === 3">
              <!-- ... (c√≥digo do passo 3 inalterado) ... -->
            </div>

            <!-- Success Message -->
            <div class="form-step" [class.active]="currentStep === 4">
              <!-- ... (c√≥digo do passo 4 inalterado) ... -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<app-footer />
