<nav class="navbar navbar-expand-lg shadow-sm fixed-top">
  <div class="container">
    <!-- Brand -->
    <a
      class="navbar-brand d-flex align-items-center"
      [routerLink]="brandConfig.route"
      (click)="closeMenu()"
    >
      <img
        [src]="brandConfig.logoSrc"
        [alt]="brandConfig.logoAlt"
        loading="lazy"
      />
    </a>

    <!-- Mobile Toggle Button -->
    <button
      class="navbar-toggler"
      type="button"
      [attr.aria-expanded]="isMenuOpen"
      [attr.aria-controls]="'navbarNav'"
      aria-label="Toggle navigation"
      (click)="toggleMenu()"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Menu -->
    <div
      class="navbar-collapse"
      [class.collapse]="!isMenuOpen"
      [class.show]="isMenuOpen"
      id="navbarNav"
    >
      <ul class="navbar-nav ms-auto align-items-center">
        <!-- Itens de navegação normais -->
        <li
          class="nav-item"
          *ngFor="let item of navigationItems; trackBy: trackByRoute"
        >
          <a
            class="nav-link"
            [routerLink]="item.route"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: item.route === '/' }"
            (click)="closeMenu()"
          >
            <i *ngIf="item.icon" [class]="item.icon" aria-hidden="true"></i>
            {{ item.label }}
          </a>
        </li>

        <!-- Bloco de Autenticação Dinâmico -->
        <ng-container *ngIf="isAuthenticated$ | async; else loginButton">
          <!-- Mostrado quando o usuário ESTÁ logado -->
          <li class="nav-item profile-menu-item">
            <app-profile-menu></app-profile-menu>
          </li>
        </ng-container>

        <!-- Template para o botão de Login -->
        <ng-template #loginButton>
          <!-- Mostrado quando o usuário NÃO ESTÁ logado -->
          <li class="nav-item">
            <a class="btn btn-login" routerLink="/auth/login" (click)="closeMenu()">
              <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
              Login
            </a>
          </li>
        </ng-template>

      </ul>
    </div>
  </div>
</nav>
